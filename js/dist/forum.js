(()=>{var o={n:n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return o.d(t,{a:t}),t},d:(n,t)=>{for(var r in t)o.o(t,r)&&!o.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},o:(o,n)=>Object.prototype.hasOwnProperty.call(o,n)};(()=>{"use strict";const n=flarum.core.compat["forum/app"];var t=o.n(n);const r=flarum.core.compat["common/extend"],e=flarum.core.compat["common/Model"];var a=o.n(e);const s=flarum.core.compat["common/models/User"];var u=o.n(s);const c=flarum.core.compat["forum/components/SettingsPage"];var p=o.n(c);const i=flarum.core.compat["common/components/Button"];var l=o.n(i);const d=flarum.core.compat["forum/components/UserCard"];var f=o.n(d);function h(o,n){return h=Object.setPrototypeOf||function(o,n){return o.__proto__=n,o},h(o,n)}const v=flarum.core.compat["common/components/Modal"];var b=o.n(v);const y=flarum.core.compat["common/utils/Stream"];var g=o.n(y),_=function(o){var n,t;function r(){return o.apply(this,arguments)||this}t=o,(n=r).prototype=Object.create(t.prototype),n.prototype.constructor=n,h(n,t);var e=r.prototype;return e.oninit=function(n){o.prototype.oninit.call(this,n),this.pronouns=g()(app.session.user.pronouns())},e.className=function(){return"PronounsModal Modal--small"},e.title=function(){return app.translator.trans("datlechin-pronouns.forum.change_pronouns.title")},e.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form Form--centered"},m("div",{className:"Form-group"},m("input",{type:"text",autocomplete:"off",name:"pronouns",className:"FormControl",bidi:this.pronouns,disabled:this.loading})),m("p",{class:"helpText"},app.translator.trans("datlechin-pronouns.forum.change_pronouns.help",{a:m("a",{href:"https://www.mypronouns.org/what-and-why",target:"_blank"})})),m("div",{className:"Form-group"},l().component({className:"Button Button--primary Button--block",type:"submit",loading:this.loading},app.translator.trans("datlechin-pronouns.forum.change_pronouns.submit_button")))))},e.onsubmit=function(o){var n=this;o.preventDefault(),this.pronouns()!==app.session.user.pronouns()?(this.loading=!0,app.session.user.save({pronouns:this.pronouns()},{errorHandler:this.onerror.bind(this)}).then(this.hide.bind(this)).catch((function(){n.loading=!1,m.redraw()}))):this.hide()},r}(b());const N=flarum.core.compat["common/helpers/icon"];var w=o.n(N);t().initializers.add("datlechin/flarum-pronouns",(function(){u().prototype.pronouns=a().attribute("pronouns"),(0,r.extend)(p().prototype,"accountItems",(function(o){o.add("changePronouns",m(l(),{className:"Button",onclick:function(){return t().modal.show(_)}},t().translator.trans("datlechin-pronouns.forum.settings.change_pronouns_button")))})),(0,r.extend)(f().prototype,"infoItems",(function(o){var n=this.attrs.user.pronouns();if(null!=n&&""!==n){var r=t().forum.attribute("pronounsPrefix"),e=t().forum.attribute("pronounsIcon");o.add("pronouns",m("span",{className:"UserCard-personalPronouns"},e?w()("fas fa-chess-queen"):r,n),10)}}))}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map