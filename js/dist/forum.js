(()=>{var o={n:n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return o.d(t,{a:t}),t},d:(n,t)=>{for(var r in t)o.o(t,r)&&!o.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},o:(o,n)=>Object.prototype.hasOwnProperty.call(o,n),r:o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}},n={};(()=>{"use strict";o.r(n);const t=flarum.core.compat["forum/app"];var r=o.n(t);const e=flarum.core.compat["common/extend"],a=flarum.core.compat["common/Model"];var s=o.n(a);const u=flarum.core.compat["common/models/User"];var c=o.n(u);const p=flarum.core.compat["forum/components/SettingsPage"];var i=o.n(p);const l=flarum.core.compat["common/components/Button"];var d=o.n(l);const f=flarum.core.compat["forum/components/UserCard"];var h=o.n(f);function b(o,n){return b=Object.setPrototypeOf||function(o,n){return o.__proto__=n,o},b(o,n)}const v=flarum.core.compat["common/components/Modal"];var y=o.n(v);const g=flarum.core.compat["common/utils/Stream"];var _=o.n(g),P=function(o){var n,t;function r(){return o.apply(this,arguments)||this}t=o,(n=r).prototype=Object.create(t.prototype),n.prototype.constructor=n,b(n,t);var e=r.prototype;return e.oninit=function(n){o.prototype.oninit.call(this,n),this.pronouns=_()(app.session.user.pronouns())},e.className=function(){return"PronounsModal Modal--small"},e.title=function(){return app.translator.trans("datlechin-pronouns.forum.change_pronouns.title")},e.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form Form--centered"},m("div",{className:"Form-group"},m("input",{type:"text",autocomplete:"off",name:"pronouns",className:"FormControl",bidi:this.pronouns,disabled:this.loading})),m("p",{class:"helpText"},app.translator.trans("datlechin-pronouns.forum.change_pronouns.help",{a:m("a",{href:"https://www.mypronouns.org/what-and-why",target:"_blank"})})),m("div",{className:"Form-group"},d().component({className:"Button Button--primary Button--block",type:"submit",loading:this.loading},app.translator.trans("datlechin-pronouns.forum.change_pronouns.submit_button")))))},e.onsubmit=function(o){var n=this;o.preventDefault(),this.pronouns()!==app.session.user.pronouns()?(this.loading=!0,app.session.user.save({pronouns:this.pronouns()},{errorHandler:this.onerror.bind(this)}).then(this.hide.bind(this)).catch((function(){n.loading=!1,m.redraw()}))):this.hide()},r}(y());const N=flarum.core.compat["common/helpers/icon"];var w=o.n(N);r().initializers.add("datlechin/flarum-pronouns",(function(){c().prototype.pronouns=s().attribute("pronouns"),(0,e.extend)(i().prototype,"accountItems",(function(o){o.add("changePronouns",m(d(),{className:"Button",onclick:function(){return r().modal.show(P)}},r().translator.trans("datlechin-pronouns.forum.settings.change_pronouns_button")))})),(0,e.extend)(h().prototype,"infoItems",(function(o){var n=this.attrs.user.pronouns();if(null!=n&&""!==n){var t=r().forum.attribute("pronounsPrefix"),e=r().forum.attribute("pronounsIcon");o.add("pronouns",m("span",{className:"UserCard-personalPronouns"},e?w()("fas fa-chess-queen"):t,n),10)}}))}))})(),module.exports=n})();
//# sourceMappingURL=forum.js.map